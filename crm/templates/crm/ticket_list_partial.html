{% if tickets %}
<div class="table-responsive">
    <!-- Desktop Table View -->
    <div class="desktop-table">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tytuł</th>
                    <th>Status</th>
                    <th>Priorytet</th>
                    <th>Kategoria</th>
                    <th>Data utworzenia</th>
                    <th>Ostatnia aktualizacja</th>
                </tr>
            </thead>
            <tbody>
                {% for ticket in tickets %}
                <tr id="ticket-row-{{ ticket.id }}">
                    <td>{{ ticket.id }}</td>
                    <td>{{ ticket.title }}</td>
                    <td>
                        <span class="badge {% if ticket.status == 'new' %}bg-primary
                                         {% elif ticket.status == 'in_progress' %}bg-info
                                         {% elif ticket.status == 'unresolved' %}bg-warning text-dark
                                         {% elif ticket.status == 'resolved' %}bg-success
                                         {% else %}bg-secondary{% endif %}">
                            {{ ticket.get_status_display }}
                        </span>
                    </td>
                    <td>
                        <span class="badge {% if ticket.priority == 'low' %}bg-info
                                         {% elif ticket.priority == 'medium' %}bg-warning
                                         {% elif ticket.priority == 'high' %}bg-danger
                                         {% else %}bg-dark{% endif %}">
                            {{ ticket.get_priority_display }}
                        </span>
                    </td>
                    <td>{{ ticket.get_category_display }}</td>
                    <td>{{ ticket.created_at|date:"d.m.Y H:i" }}</td>
                    <td>{{ ticket.updated_at|date:"d.m.Y H:i" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <!-- Mobile Card View -->
    <div class="mobile-cards">
        {% for ticket in tickets %}
        <div class="mobile-card 
            {% if ticket.priority == 'critical' %}mobile-priority-critical
            {% elif ticket.priority == 'high' %}mobile-priority-high
            {% elif ticket.priority == 'medium' %}mobile-priority-medium
            {% elif ticket.priority == 'low' %}mobile-priority-low
            {% endif %}">
            <div class="mobile-card-header">
                <span class="mobile-card-id">#{{ ticket.id }}</span>
                <span class="badge 
                    {% if ticket.status == 'new' %}bg-primary
                    {% elif ticket.status == 'in_progress' %}bg-info
                    {% elif ticket.status == 'unresolved' %}bg-warning text-dark
                    {% elif ticket.status == 'resolved' %}bg-success
                    {% elif ticket.status == 'closed' %}bg-secondary
                    {% endif %}">
                    {{ ticket.get_status_display }}
                </span>
            </div>
            
            <div class="mobile-card-title">
                <a href="{% url 'ticket_detail' ticket.pk %}">{{ ticket.title }}</a>
            </div>
            
            <div class="mobile-card-field">
                <span class="mobile-card-label">Priorytet:</span>
                <span class="mobile-card-value">
                    <span class="badge 
                        {% if ticket.priority == 'low' %}bg-info
                        {% elif ticket.priority == 'medium' %}bg-warning
                        {% elif ticket.priority == 'high' %}bg-danger
                        {% else %}bg-dark
                        {% endif %}">
                        {{ ticket.get_priority_display }}
                    </span>
                </span>
            </div>
            
            <div class="mobile-card-field">
                <span class="mobile-card-label">Kategoria:</span>
                <span class="mobile-card-value">{{ ticket.get_category_display }}</span>
            </div>
            
            <div class="mobile-card-field">
                <span class="mobile-card-label">Utworzone:</span>
                <span class="mobile-card-value">{{ ticket.created_at|date:"d.m.Y" }}</span>
            </div>
            
            <div class="mobile-card-field">
                <span class="mobile-card-label">Aktualizowane:</span>
                <span class="mobile-card-value">{{ ticket.updated_at|date:"d.m.Y" }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
/* Mobile-responsive styles for partial template */
@media (max-width: 576px) {
    .desktop-table {
        display: none !important;
    }
    
    .mobile-cards {
        display: block !important;
    }
    
    .mobile-card {
        border: 1px solid #dee2e6;
        border-radius: 0.5rem;
        margin-bottom: 1rem;
        padding: 1rem;
        background: white;
        box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075);
    }
    
    .mobile-card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #e9ecef;
    }
    
    .mobile-card-id {
        font-weight: bold;
        color: #6c757d;
        font-size: 0.9rem;
    }
    
    .mobile-card-title {
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 1.1rem;
        line-height: 1.3;
    }
    
    .mobile-card-title a {
        text-decoration: none;
        color: inherit;
    }
    
    .mobile-card-title a:hover {
        color: var(--accent-color);
    }
    
    .mobile-card-field {
        margin-bottom: 0.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .mobile-card-label {
        font-weight: 600;
        color: #6c757d;
        margin-right: 0.5rem;
        min-width: 80px;
    }
    
    .mobile-card-value {
        text-align: right;
    }
    
    .mobile-priority-critical { border-left: 4px solid #dc3545; }
    .mobile-priority-high { border-left: 4px solid #fd7e14; }
    .mobile-priority-medium { border-left: 4px solid #0dcaf0; }
    .mobile-priority-low { border-left: 4px solid #6c757d; }
}

@media (min-width: 577px) {
    .desktop-table {
        display: block !important;
    }
    
    .mobile-cards {
        display: none !important;
    }
}
</style>
{% else %}
<div class="alert alert-info">
    Brak zgłoszeń do wyświetlenia.
</div>
{% endif %}